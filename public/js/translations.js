const translations = {
    ar: {
        siteName: 'NovaFashion',
        home: 'الرئيسية',
        products: 'المنتجات',
        about: 'عن المتجر',
        contact: 'اتصل بنا',
        cart: 'السلة',
        admin: 'الإدارة',
        heroTitle: 'أحدث صيحات الموضة بين يديك',
        heroSubtitle: 'اكتشف تشكيلتنا المميزة من الألبسة العصرية',
        shopNow: 'تسوق الآن',
        ourProducts: 'منتجاتنا',
        addToCart: 'أضف للسلة',
        aboutTitle: 'عن NovaFashion',
        aboutText: 'NovaFashion هو متجر أزياء عصري يقدم لك أحدث صيحات الموضة مع ضمان الجودة والأناقة. تسوق بسهولة واستمتع بتجربة فريدة.',
        contactTitle: 'اتصل بنا',
        name: 'الاسم',
        email: 'البريد الإلكتروني',
        phone: 'رقم الهاتف',
        message: 'رسالتك',
        send: 'إرسال',
        footer: '© 2025 NovaFashion. جميع الحقوق محفوظة.',
        cartTitle: 'سلة التسوق',
        emptyCart: 'السلة فارغة',
        total: 'المجموع',
        deliveryPrice: 'سعر التوصيل',
        grandTotal: 'المجموع الكلي',
        checkout: 'إتمام الطلب',
        wilaya: 'الولاية',
        selectWilaya: 'اختر الولاية',
        address: 'العنوان',
        orderSuccess: 'تم إرسال طلبك بنجاح!',
        price: 'السعر',
        currency: 'دج',
        remove: 'حذف',
        quantity: 'الكمية',
        searchPlaceholder: 'ابحث عن منتج...',
        allCategories: 'جميع الفئات',
        allPrices: 'جميع الأسعار',
        noProducts: 'لا توجد منتجات',
        rateProduct: 'قيّم المنتج',
        rating: 'التقييم',
        reviewPlaceholder: 'اكتب رأيك (اختياري)',
        submitRating: 'إرسال التقييم',
        ratingSuccess: 'تم إرسال تقييمك بنجاح!',
        ratingError: 'حدث خطأ في إرسال التقييم',
        visitUs: 'زوروا متجرنا',
        locationDesc: 'نحن في انتظاركم في موقعنا لتجربة تسوق فريدة',
        messageSent: 'تم إرسال رسالتك بنجاح!'
    },
    fr: {
        siteName: 'NovaFashion',
        home: 'Accueil',
        products: 'Produits',
        about: 'À propos',
        contact: 'Contact',
        cart: 'Panier',
        admin: 'Admin',
        heroTitle: 'Les Dernières Tendances Mode à Portée de Main',
        heroSubtitle: 'Découvrez notre collection exclusive de vêtements modernes',
        shopNow: 'Acheter',
        ourProducts: 'Nos Produits',
        addToCart: 'Ajouter au panier',
        aboutTitle: 'À propos de NovaFashion',
        aboutText: "NovaFashion est une boutique de mode moderne qui vous offre les dernières tendances avec garantie de qualité et d'élégance. Faites vos achats facilement et profitez d'une expérience unique.",
        contactTitle: 'Contactez-nous',
        name: 'Nom',
        email: 'Email',
        phone: 'Téléphone',
        message: 'Votre message',
        send: 'Envoyer',
        footer: '© 2025 NovaFashion. Tous droits réservés.',
        cartTitle: 'Panier',
        emptyCart: 'Panier vide',
        total: 'Total',
        deliveryPrice: 'Frais de livraison',
        grandTotal: 'Total Général',
        checkout: 'Commander',
        wilaya: 'Wilaya',
        selectWilaya: 'Choisir la wilaya',
        address: 'Adresse',
        orderSuccess: 'Votre commande a été envoyée avec succès!',
        price: 'Prix',
        currency: 'DA',
        remove: 'Supprimer',
        quantity: 'Quantité',
        searchPlaceholder: 'Rechercher un produit...',
        allCategories: 'Toutes catégories',
        allPrices: 'Tous les prix',
        noProducts: 'Aucun produit trouvé',
        rateProduct: 'Évaluer',
        rating: 'Note',
        reviewPlaceholder: 'Votre avis (optionnel)',
        submitRating: 'Envoyer',
        ratingSuccess: 'Votre évaluation a été envoyée!',
        ratingError: 'Erreur lors de l\'envoi',
        visitUs: 'Visitez notre magasin',
        locationDesc: 'Nous vous attendons pour une expérience shopping unique',
        messageSent: 'Votre message a été envoyé avec succès!'
    },
    en: {
        siteName: 'NovaFashion',
        home: 'Home',
        products: 'Products',
        about: 'About',
        contact: 'Contact',
        cart: 'Cart',
        admin: 'Admin',
        heroTitle: 'Latest Fashion Trends at Your Fingertips',
        heroSubtitle: 'Discover our exclusive collection of modern clothing',
        shopNow: 'Shop Now',
        ourProducts: 'Our Products',
        addToCart: 'Add to Cart',
        aboutTitle: 'About NovaFashion',
        aboutText: 'NovaFashion is a modern fashion store offering you the latest trends with guaranteed quality and elegance. Shop easily and enjoy a unique experience.',
        contactTitle: 'Contact Us',
        name: 'Name',
        email: 'Email',
        phone: 'Phone',
        message: 'Your message',
        send: 'Send',
        footer: '© 2025 NovaFashion. All rights reserved.',
        cartTitle: 'Shopping Cart',
        emptyCart: 'Cart is empty',
        total: 'Total',
        deliveryPrice: 'Delivery Price',
        grandTotal: 'Grand Total',
        checkout: 'Checkout',
        wilaya: 'State',
        selectWilaya: 'Select state',
        address: 'Address',
        orderSuccess: 'Your order has been sent successfully!',
        price: 'Price',
        currency: 'DZD',
        remove: 'Remove',
        quantity: 'Quantity',
        searchPlaceholder: 'Search for a product...',
        allCategories: 'All Categories',
        allPrices: 'All Prices',
        noProducts: 'No products found',
        rateProduct: 'Rate Product',
        rating: 'Rating',
        reviewPlaceholder: 'Your review (optional)',
        submitRating: 'Submit Rating',
        ratingSuccess: 'Your rating has been submitted!',
        ratingError: 'Error submitting rating',
        visitUs: 'Visit Our Store',
        locationDesc: 'We are waiting for you for a unique shopping experience',
        messageSent: 'Your message has been sent successfully!'
    }
};

let currentLang = localStorage.getItem('language') || 'ar';

function t(key) {
    return translations[currentLang][key] || key;
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    updatePageLanguage();
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = lang;
    updateLanguageButton();
}

function toggleLanguage() {
    const languages = ['ar', 'fr', 'en'];
    const currentIndex = languages.indexOf(currentLang);
    const nextIndex = (currentIndex + 1) % languages.length;
    setLanguage(languages[nextIndex]);
}

function updateLanguageButton() {
    const langButton = document.getElementById('langToggle');
    if (langButton) {
        const langNames = {
            'ar': 'عربي',
            'fr': 'Français',
            'en': 'English'
        };
        langButton.textContent = langNames[currentLang];
    }
}

function updatePageLanguage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.placeholder = t(key);
        } else {
            el.textContent = t(key);
        }
    });
    
    if (typeof displayProducts === 'function') {
        displayProducts();
    }
}

document.addEventListener('DOMContentLoaded', function() {
    updateLanguageButton();
});
